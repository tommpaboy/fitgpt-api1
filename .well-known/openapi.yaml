openapi: 3.0.1
info:
  title: FitGPT API
  description: API för att hämta och analysera data från Fitbit.
  version: "1.0.0"

servers:
  - url: https://fitgpt-2364.onrender.com

paths:
  /:
    get:
      summary: Kontrollera att API:t är igång
      operationId: getHome
      responses:
        "200":
          description: FitGPT är igång-meddelande
          content:
            text/html:
              schema:
                type: string

  /authorize:
    get:
      summary: Hämta auktoriserings-URL för Fitbit OAuth
      operationId: getAuthorizeUrl
      responses:
        "200":
          description: URL för Fitbit OAuth
          content:
            application/json:
              schema:
                type: object
                properties:
                  auth_url:
                    type: string
                    format: uri

  /callback:
    get:
      summary: Hantera återkoppling från Fitbit och spara access token
      operationId: handleCallback
      parameters:
        - name: code
          in: query
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Token mottagen
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  token_data:
                    type: object

  /data:
    get:
      summary: Hämta kombinerad Fitbit-data för idag
      operationId: getCombinedFitbitData
      responses:
        "200":
          description: Returnerar dagens Fitbit-data
          content:
            application/json:
              schema:
                type: object
                properties:
                  steps:
                    type: object
                  calories:
                    type: object
                  sleep:
                    type: object
                  heart:
                    type: object
