openapi: 3.0.1
info:
  title: FitGPT API
  description: |
    API f√∂r att h√§mta och analysera Fitbit-data ‚Äì steg, kalorier, s√∂mn, puls,
    vikt, HRV och loggade tr√§ningspass, samt logga egna m√•ltider och pass.
    
    ‚Ä¢ `/data`            ‚Äì snabb sammanfattning  
    ‚Ä¢ `/data/extended`   ‚Äì djupare insikt  
    ‚Ä¢ `/log/meal`        ‚Äì logga / h√§mta m√•ltider  
    ‚Ä¢ `/log/workout`     ‚Äì logga / h√§mta tr√§ningspass
  version: "1.1.2"

servers:
  - url: https://fitgpt-2364.onrender.com

paths:
  /data:
    get:
      summary: H√§mta sammanfattad Fitbit-data
      operationId: getCombinedData
      parameters:
        - name: days
          in: query
          schema: { type: integer, default: 1, minimum: 1, maximum: 30 }
          description: Antal dagar att h√§mta data f√∂r (standard: 1)
      responses:
        "200":
          description: Sammanfattad Fitbit-data (steg, kalorier, s√∂mn, puls)
          content:
            application/json:
              schema: { type: object }
      x-openai-isConsequential: false

  /data/extended:
    get:
      summary: H√§mta detaljerad Fitbit-data
      operationId: getExtendedData
      parameters:
        - name: days
          in: query
          schema: { type: integer, default: 1, minimum: 1, maximum: 30 }
          description: Antal dagar om `target_date` inte anges
        - name: target_date
          in: query
          schema: { type: string, format: date }
          description: Specifikt datum (YYYY-MM-DD) ‚Äì √•sidos√§tter `days`
      responses:
        "200":
          description: |
            Detaljerad Fitbit-data:
            ‚Ä¢ steg, kalorier, s√∂mn, puls  
            ‚Ä¢ vikt, HRV  
            ‚Ä¢ senaste tr√§ningspass (activity_logs)
          content:
            application/json:
              schema: { type: object }
      x-openai-isConsequential: false

  /data/steps:
    get:
      summary: H√§mta stegdata f√∂r ett datum
      operationId: getSteps
      parameters:
        - name: date
          in: query
          required: true
          schema: { type: string, format: date }
          description: Datum (YYYY-MM-DD)
      responses:
        "200": { description: Stegdata, content: { application/json: { schema: { type: object } } } }
      x-openai-isConsequential: false

  /data/sleep:
    get:
      summary: H√§mta s√∂mndata f√∂r ett datum
      operationId: getSleep
      parameters:
        - name: date
          in: query
          required: true
          schema: { type: string, format: date }
          description: Datum (YYYY-MM-DD)
      responses:
        "200": { description: S√∂mndata, content: { application/json: { schema: { type: object } } } }
      x-openai-isConsequential: false

  /data/heart:
    get:
      summary: H√§mta hj√§rtfrekvensdata f√∂r ett datum
      operationId: getHeart
      parameters:
        - name: date
          in: query
          required: true
          schema: { type: string, format: date }
          description: Datum (YYYY-MM-DD)
      responses:
        "200": { description: Hj√§rtfrekvensdata, content: { application/json: { schema: { type: object } } } }
      x-openai-isConsequential: false

  /data/calories:
    get:
      summary: H√§mta kaloridata f√∂r ett datum
      operationId: getCalories
      parameters:
        - name: date
          in: query
          required: true
          schema: { type: string, format: date }
          description: Datum (YYYY-MM-DD)
      responses:
        "200": { description: Kaloridata, content: { application/json: { schema: { type: object } } } }
      x-openai-isConsequential: false

  /log/meal:
    post:
      summary: Logga en eller flera m√•ltider
      operationId: logMeals
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: "#/components/schemas/MealLog"
      responses:
        "200":
          description: Bekr√§ftelse p√• sparade m√•ltider
          content:
            application/json:
              schema: { type: object }
      x-openai-isConsequential: false

    get:
      summary: H√§mta alla m√•ltider f√∂r ett datum
      operationId: getMeals
      parameters:
        - name: date
          in: query
          required: true
          schema: { type: string, format: date }
          description: Datum (YYYY-MM-DD)
      responses:
        "200":
          description: Lista av m√•ltider
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/MealLog"
      x-openai-isConsequential: false

  /log/workout:
    post:
      summary: Logga ett eller flera tr√§ningspass
      operationId: logWorkouts
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: "#/components/schemas/WorkoutLog"
      responses:
        "200":
          description: Bekr√§ftelse p√• sparade tr√§ningspass
          content:
            application/json:
              schema: { type: object }
      x-openai-isConsequential: false

    get:
      summary: H√§mta tr√§ningspass f√∂r ett datum
      operationId: getWorkouts
      parameters:
        - name: date
          in: query
          required: true
          schema: { type: string, format: date }
          description: Datum (YYYY-MM-DD)
      responses:
        "200":
          description: Lista av tr√§ningspass
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/WorkoutLog"
      x-openai-isConsequential: false

components:
  schemas:
    MealLog:
      type: object
      required: [date, meal, items]
      properties:
        date:
          type: string
          format: date
          description: Datum (YYYY-MM-DD)
        meal:
          type: string
          description: Typ av m√•l (Frukost, Lunch, ‚Ä¶)
        items:
          type: string
          description: Livsmedel och m√§ngder
        estimated_calories:          # üÜï Till√§gg
          type: integer
          description: Uppskattat kaloriinneh√•ll (frivilligt, hellre n√•got h√∂gre)

    WorkoutLog:
      type: object
      required: [date, type, details]
      properties:
        date:
          type: string
          format: date
          description: Datum (YYYY-MM-DD)
        type:
          type: string
          description: Tr√§ningstyp (Styrka, Cardio, ‚Ä¶)
        details:
          type: string
          description: Exempel ‚Äì ‚ÄúMarklyft 100 kg √ó 3‚Äù
