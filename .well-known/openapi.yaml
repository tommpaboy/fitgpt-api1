openapi: 3.0.1
info:
  title: FitGPT API
  description: API för att hämta och analysera data från Fitbit via GPT.
  version: "1.0.0"

servers:
  - url: https://fitgpt-2364.onrender.com

paths:
  /:
    get:
      summary: Kontrollera att API:t är igång
      operationId: getHome
      responses:
        "200":
          description: FitGPT är igång-meddelande
          content:
            text/html:
              schema:
                type: string

  /authorize:
    get:
      summary: Redirecta användaren till Fitbit OAuth
      operationId: authorizeUser
      responses:
        "302":
          description: Redirect till Fitbit OAuth-login

  /callback:
    get:
      summary: Ta emot auth-code från Fitbit och spara access_token
      operationId: handleOAuthCallback
      parameters:
        - name: code
          in: query
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Token mottagen eller felmeddelande
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  token_data:
                    type: object

  /data:
    get:
      summary: Hämta kombinerad Fitbit-data för valfritt antal dagar
      operationId: getCombinedFitbitData
      parameters:
        - name: days
          in: query
          required: false
          schema:
            type: integer
            default: 1
            minimum: 1
            maximum: 30
          description: Antal dagar bakåt att hämta data för (standard: 1)
      responses:
        "200":
          description: Returnerar kombinerad Fitbit-data
          content:
            application/json:
              schema:
                type: object
                properties:
                  from:
                    type: string
                    format: date
                  to:
                    type: string
                    format: date
                  steps:
                    type: object
                  calories:
                    type: object
                  sleep:
                    type: object
                  heart:
                    type: object

  /data/extended:
    get:
      summary: Hämta fullständig Fitbit-data för valfritt antal dagar
      operationId: getExtendedFitbitData
      parameters:
        - name: days
          in: query
          required: false
          schema:
            type: integer
            default: 1
            minimum: 1
            maximum: 30
          description: Antal dagar bakåt att hämta data för (standard: 1)
      responses:
        "200":
          description: Returnerar detaljerad Fitbit-data
          content:
            application/json:
              schema:
                type: object
                properties:
                  from:
                    type: string
                    format: date
                  to:
                    type: string
                    format: date
                  steps:
                    type: object
                  calories:
                    type: object
                  distance:
                    type: object
                  floors:
                    type: object
                  elevation:
                    type: object
                  heart:
                    type: object
                  activity_levels:
                    type: object
                    properties:
                      sedentary:
                        type: object
                      lightly_active:
                        type: object
                      fairly_active:
                        type: object
                      very_active:
                        type: object
                  sleep:
                    type: object
                  sleep_stages:
                    type: object
                  spo2:
                    type: object
                  breathing_rate:
                    type: object
                  core_temp:
                    type: object
                  skin_temp:
                    type: object
                  stress:
                    type: object
                  weight:
                    type: object
                  fat:
                    type: object
                  bmi:
                    type: object
                  profile:
                    type: object
